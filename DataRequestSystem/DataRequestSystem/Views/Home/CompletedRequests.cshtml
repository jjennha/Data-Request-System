@{
    ViewBag.Title = "Completed Requests";
}

﻿@section scripts {
    @Scripts.Render("~/bundles/app")
}

<body>
    <div class="container-fluid">
        <h2>@ViewBag.Title</h2>

        <div class="row">
            <span class="col-md-2">Date Requested</span>
            <span class="col-md-2">Requester Name</span>
            <span class="col-md-2">Type</span>
            <span class="col-md-2">Status</span>
            <span class="col-md-1">Ticket</span>
            <span class="col-md-2">File</span>
            <span class="col-md-1">Form</span>
        </div>

        <div class="panel-group" data-bind="foreach: $root.requests">
            <div" data-bind="if: $data.CompletionStatus === 'Complete'">
                <div class="panel panel-default">

                    <div class="panel-heading collapsed row requestRow" data-toggle="collapse" aria-expanded="false" aria-controls="collapse"
                         data-bind="attr: {'data-target' : ('#collapse' + $data.Id) }">

                        <span class="col-md-2" data-bind="text: $data.DateRequested.substring(0, 10)"></span>
                        <span class="col-md-2" data-bind="text: $data.RequesterName"></span>
                        <span class="col-md-2" data-bind="text: $data.Type"></span>
                        <span class="col-md-2" data-bind="text: $data.CompletionStatus"></span>
                        <span class="col-md-1">
                            <a data-bind="attr: {href: $data.TicketURL}, text: $data.TicketNumber"></a>
                        </span>
                        <span class="col-md-2">
                            <a data-bind="attr: {href: $data.FileURL}, text: $data.FileName"></a>
                        </span>
                        <span class="col-md-1 glyphicon glyphicon-plus"></span>
                    </div>

                    <!-- COLLAPSABLE INFO -->
                    <div class="collapse" data-bind="attr: { id: ('collapse' + $data.Id) }">
                        <div class="panel-body">
                            <h4 style="text-align: center"><b><u>Requested Information</u></b></h4>

                            <div class="row">
                                <div class="col-md-6">
                                    <span><b>Date Requested: </b></span>
                                    <span data-bind="text:  $data.DateRequested.substring(0, 10)"></span>
                                </div>

                                <div class="col-md-6">
                                    <span><b>Date Wanted By: </b></span>
                                    <span data-bind="text:  $data.DateWanted.substring(0, 10)"></span>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <span><b>Requester Name: </b></span>
                                    <span data-bind="text: $data.RequesterName"></span>
                                </div>

                                <div class="col-md-6">
                                    <span><b>Number of Requests: </b></span>
                                    <span data-bind="text:  $data.NumberRequests"></span>
                                </div>
                            </div>

                            <div>
                                <span><b>Request(s): </b></span>
                                <p data-bind="text: $data.Requests" style="border: 1px solid black; padding: 3px"></p>
                            </div>

                            <div>
                                <span><b>Additional Comments: </b></span>
                                <p data-bind="text: $data.RequestComments" style="border: 1px solid black; padding: 3px"></p>
                            </div>

                            <div>
                                <span><b>Format: </b></span>
                                <span data-bind="text:  $data.Format"></span>
                            </div>

                            <h4 style="text-align: center"><b><u>Developer Notes</u></b></h4>

                            <div class="row">
                                <div class="col-md-6">
                                    <span><b>Data Pulled By: </b></span>
                                    <span data-bind="text: $data.RequesterName"></span>
                                </div>

                                <div class="col-md-6">
                                    <span><b>Number of Requests: </b></span>
                                    <span data-bind="text:  $data.NumberRequests"></span>
                                </div>
                            </div>

                            <div>
                                <span><b>Developer Comments: </b></span>
                                <p data-bind="text: $data.DevComments" style="border: 1px solid black; padding: 3px"></p>
                            </div>

                            <div>
                                <span><b>Completion Status: </b></span>
                                <span data-bind="text:  $data.CompletionStatus"></span>
                            </div>

                            <div>
                                <span><b>Reason(s) for Incompletion, if applicable: </b></span>
                                <p data-bind="text: $data.UncompletionReason" style="border: 1px solid black; padding: 3px"></p>
                            </div>
                        </div>
                    </div>
                    <!-- COLLAPSIBLE INFO END -->

                </div>
            </div">

        </div>
    </div>
</body>
